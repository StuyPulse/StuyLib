buildscript {
   ext.WPI_VER = "2021.2.2"
}

plugins {
   id "java"

   id "edu.wpi.first.GradleRIO" version "${WPI_VER}"
   id "com.diffplug.spotless" version "5.10.2"
}

group = 'com.stuypulse'
version = '1.0.0'

sourceCompatibility = JavaVersion.VERSION_11
targetCompatibility = JavaVersion.VERSION_11

sourceSets {
   main {
      java {
         srcDir "src"
      }
   }
}

configurations {
   jaxDoclet
}

dependencies { 
   implementation wpi.deps.wpilib()
   nativeZip wpi.deps.wpilibJni(wpi.platforms.roborio)
   nativeDesktopZip wpi.deps.wpilibJni(wpi.platforms.desktop)

   implementation wpi.deps.vendor.java()
   nativeZip wpi.deps.vendor.jni(wpi.platforms.roborio)
   nativeDesktopZip wpi.deps.vendor.jni(wpi.platforms.desktop)

   compile "edu.wpi.first.ntcore:ntcore-java:${WPI_VER}"
   compile "edu.wpi.first.wpiutil:wpiutil-java:${WPI_VER}"
   runtime "edu.wpi.first.ntcore:ntcore-jni:${WPI_VER}:windowsx86"
   runtime "edu.wpi.first.ntcore:ntcore-jni:${WPI_VER}:windowsx86-64"
   runtime "edu.wpi.first.ntcore:ntcore-jni:${WPI_VER}:linuxx86-64"
   runtime "edu.wpi.first.ntcore:ntcore-jni:${WPI_VER}:osxx86-64"

   compile group: 'org.knowm.xchart', name: 'xchart', version: '3.2.2'

   testImplementation 'junit:junit:4.12'

   // Enable simulation gui support. Must check the box in vscode to enable support
   // upon debugging
   simulation wpi.deps.sim.gui(wpi.platforms.desktop, false)
}

spotless {
   java {
      googleJavaFormat().aosp()

      trimTrailingWhitespace()
      endWithNewline()

      importOrder('com.stuypulse.stuylib', 'com.stuypulse', 'edu.wpi')
      removeUnusedImports()

      licenseHeaderFile './LICENSE_SHORTENED'
   }
}

javadoc {
  destinationDir = file('docs/')
}

build {
   dependsOn javadoc
}

jar {
   from sourceSets.main.allSource
}
